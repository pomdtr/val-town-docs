---
title: Run
generated: 1701279907981
description: |
  An API that lets you run custom TypeScript functions via HTTP
sidebar:
  badge:
    text: Deprecated
    variant: caution
lastUpdated: 2024-02-07
---

:::caution[Deprecated]

The Run API is deprecated. Only select vals can be invoked through it.
New vals [should use the Web API instead](/types/http), which supports a wider
range of inputs & outputs.

Read our [blog post](https://blog.val.town/blog/deprecating-the-run-api/) for more details.

:::

The Run API lets you run any Val as an API. Unauthenticated use will only have
access to public vals. If you run a JSON Val, it simply returns that Val. A
function Val will be executed its author's permissions, so it will be able to
read and write to author's public and private vals, read their environment variables, and send
them emails via [`std/email`](/std/email).

You pass `args` to Run API function calls via a JSON-encoded array. While it may
feel a bit clunky to always pass an array (even when passing a single argument),
this is a clean and expressive way to accept any number of arguments.

## GET `/v1/run/{username}.{val_name}`

<vt-playground disabled code={`
import { fetchJSON } from "https://esm.town/v/stevekrouse/fetchJSON";

console.log(await fetchJSON(
  \`https://api.val.town/v1/run/stevekrouse.add?args=\${JSON.stringify([1, 2])}\`
));
`.trim()} />

## POST `/v1/run/{username}.{val_name}`

<vt-playground disabled code={`
import { fetchJSON } from "https://esm.town/v/stevekrouse/fetchJSON";

console.log(await fetchJSON(\`https://api.val.town/v1/run/stevekrouse.add\`, {
  method: "POST",
  body: JSON.stringify({
    args: [1, 2],
  }),
}));
`.trim()} />
